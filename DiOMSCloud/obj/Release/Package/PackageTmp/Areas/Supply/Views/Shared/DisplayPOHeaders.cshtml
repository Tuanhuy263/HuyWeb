@using PagedList.Mvc
@model  PagedList.IPagedList<POListView>

<link rel="stylesheet" href="~/Content/PagingStyle.css">
@{
    string noteid = "";
}
<input type="checkbox" title="Only apply into current page" onclick="Supply.PurchaseOrder.Check_UncheckAll(this)" />Check/Uncheck All
@using (Html.BeginForm())
{
    <table class="table table-condensed-xs">
        <thead>
            <tr>
                <th></th>
                <th class="header text-center">ID</th>
                <th class="header text-center">PO #</th>
                <th class="header text-center">PO Ori #</th>
                <th class="header text-center">Vendor</th>
                <th class="header text-center">SO #</th>
                <th class="header text-center">PO Date</th>
                <th class="header text-center">Status</th>
                <th class="header text-center">Payment Due</th>
                <th class="header text-center">Note</th>
                <th></th>
            </tr>
        </thead>
        @if (Model != null && Model.Count > 0)
        {
            foreach (var po in Model)
            {
        <tr align="center">
            <td>@Html.CheckBox(string.Format("chkPO_{0}", po.PONo), new { id = string.Format("chkPO_{0}", po.PONo) })</td>
            <td><a href="#" id="@po.PONo" onclick="Supply.PurchaseOrder.ShowPODetails(event,'@Url.Action("Details", "PO", new { area = "Supply" })','@po.PONo')">@po.PONo</a>
            <td>@po.PONumber</td>
            <td>@po.POOriginalNumber</td>
            <td>@po.VENDOR_NO</td>
            <td>@po.SONumber</td>
            <td>@po.PODate.ToString("MM/dd/yyyy")</td>
            <td>@po.Status</td>
            <td>
                @{
                    string payment = string.Format("{0:#,###,###.###} {1}", po.PaymentDue, "$");
                    @payment
                }
            </td>
            <td>
                @if (!string.IsNullOrEmpty(po.Note))
                {
                    noteid = string.Format("note{0}", po.PONo);
                    <a data-toggle="collapse" data-parent="#accordion" href="#@noteid">View Note</a>
                    <div id="@noteid" class="panel-collapse collapse">
                        <div class="panel-body">
                            @po.Note
                        </div>
                    </div>
                }
            </td>
            <td><a href="@Url.Action("Edit","PO",new {area="Supply", id=po.PONo.ToString() })">Add Notes</a></td>
        </tr>
            }
        }

    </table>
    <p></p>
    <div id="container" style="margin-left: 20px">
        <p></p>
        <p></p>
        <div class="pagination" style="margin-left: 400px">
            Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber)
            of @Model.PageCount   @Html.PagedListPager(Model, page => Url.Action("ListPO", "PO", new { page = page, area = "Supply" }), PagedListRenderOptions.EnableUnobtrusiveAjaxReplacing(new AjaxOptions() { HttpMethod = "GET", UpdateTargetId = "POList" }))
        </div>
    </div>
}
